{% extends 'base.html.twig' %}

{% block body %}
	<div class="container mt-4">
		{% for message in app.flashes('success') %}
			<div class="alert alert-success">
				{{ message }}
			</div>
		{% endfor %}

		{% for message in app.flashes('error') %}
			<div class="alert alert-danger">
				{{ message }}
			</div>
		{% endfor %}

		<h1 class="mt-4 text-center">{{ 'admin_panel.products'|trans }}</h1>
		<div class="mb-3">
			<a href="{{ path('app_product_add') }}" class="btn btn-primary">{{ 'add_new_product'|trans }}</a>
		</div>

		<table class="table table-striped table-bordered">
			<thead class="thead-dark">
				<tr>
					<th>{{ 'ID'|trans }}</th>
					<th>{{ 'name'|trans }}</th>
					<th>{{ 'price'|trans }}</th>
					<th>{{ 'description'|trans }}</th>
					<th>{{ 'stock'|trans }}</th>
					<th>{{ 'status'|trans }}</th>
                    <th>{{ 'category'|trans }}</th>
					<th>{{ 'actions'|trans }}</th>
				</tr>
			</thead>
			<tbody>
				{% for product in pagination %}
					<tr>
						<td>{{ product.id }}</td>
						<td>{{ product.name }}</td>
						<td>{{ product.price }} â‚¬</td>
						<td>{{ product.description }}</td>
						<td>{{ product.stock }}</td>
						<td>{{ product.status.toString() }}</td>
                        <td>{{ product.category.name }}</td>

						<td>
							<a href="{{ path('app_product_edit', { id: product.id }) }}" class="btn btn-warning btn-sm">{{ 'edit'|trans }}</a>
							<form action="{{ path('app_product_delete', { id: product.id }) }}" method="post" style="display:inline;">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ product.id) }}">
								<button class="btn btn-danger btn-sm" type="submit">{{ 'delete'|trans }}</button>
							</form>
						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="8" class="text-center">{{ 'no_products_found'|trans }}</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

		<div class="mt-3 d-flex justify-content-center">
			{{ knp_pagination_render(pagination) }}
		</div>
	</div>
{% endblock %}